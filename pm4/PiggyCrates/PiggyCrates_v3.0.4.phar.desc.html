<h1><a id="user-content-piggycrates--" class="anchor" aria-hidden="true" href="#piggycrates--"><span aria-hidden="true" class="octicon octicon-link"></span></a>PiggyCrates <a href="https://poggit.pmmp.io/p/PiggyCrates" rel="nofollow"><img src="https://camo.githubusercontent.com/69a87c553c85d8495b0f83a12170f972b60c709866695b18a0b669b06d92037b/68747470733a2f2f706f676769742e706d6d702e696f2f736869656c642e646c2f5069676779437261746573" alt="Poggit-CI" data-canonical-src="https://poggit.pmmp.io/shield.dl/PiggyCrates" style="max-width: 100%;"></a> <a href="https://discord.gg/qmnDsSD" rel="nofollow"><img src="https://camo.githubusercontent.com/7703e7dbee515375baba2edb8001bea0b7091279d34b235bf124183234ca1930/68747470733a2f2f696d672e736869656c64732e696f2f646973636f72642f3333303835303330373630373336333538353f6c6f676f3d646973636f7264" alt="Discord" data-canonical-src="https://img.shields.io/discord/330850307607363585?logo=discord" style="max-width: 100%;"></a>
</h1>
<p>PiggyCrates is a simple and customizable crates plugin, supporting an unlimited amount of crate types. It also supports vanilla and custom enchants, such as <a href="https://github.com/DaPigGuy/PiggyCustomEnchants/">PiggyCustomEnchants</a>.</p>
<h2><a id="user-content-prerequisites" class="anchor" aria-hidden="true" href="#prerequisites"><span aria-hidden="true" class="octicon octicon-link"></span></a>Prerequisites</h2>
<ul>
<li>Basic knowledge on how to install plugins from Poggit Releases and/or Poggit CI</li>
<li>PMMP 4.0.0+</li>
</ul>
<h2><a id="user-content-installation--setup" class="anchor" aria-hidden="true" href="#installation--setup"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation &amp; Setup</h2>
<ol>
<li>
<p>Install the plugin from Poggit.</p>
</li>
<li>
<p>Start your server.</p>
</li>
<li>
<p>(Optional) The <code>config.yml</code> file has a few options that allow you to customize your key items &amp; crate modes (default is roulette).</p>
</li>
<li>
<p>Open the <code>crates.yml</code>.</p>
</li>
<li>
<p>PiggyCrates supports an unlimited number of crates. To define a crate, add a key <code>crates.yourcratename</code>.</p>
</li>
<li>
<p>Configure your crate types. Crate types have several different properties:</p>
<ul>
<li>(Optional) <code>floating-text</code>: Floating text that will appear above the crate type. Leave empty for no floating text.</li>
<li>(Optional) <code>commands</code>: Commands to be run by CONSOLE when crate type is opened. Use <code>{PLAYER}</code> as a placeholder for player name.</li>
<li>
<code>drops</code>: Possible drops of a crate type. Items are defined with the properties:
<ul>
<li>
<code>id</code>: Item ID</li>
<li>
<code>meta</code>: Item Meta</li>
<li>
<code>amount</code>: Item Amount</li>
<li>(Optional) <code>type</code>: Item Type
<ul>
<li>(Default) <code>item</code>: Runs all crate item commands &amp; gives the item</li>
<li>
<code>command</code>: Runs all crate item commands</li>
</ul>
</li>
<li>(Optional) <code>chance</code>: Item Weight</li>
<li>(Optional) <code>nbt</code>: Item NBT as stringified JSON</li>
<li>(Optional) <code>name</code>: Item Name</li>
<li>(Optional) <code>lore</code>: Item Lore as string with line breaks represented as <code>\n</code>
</li>
<li>(Optional) <code>enchantments</code>: Item enchantments defined like so:
<div class="highlight highlight-source-yaml"><pre><span class="pl-ent">enchantments</span>:
 - <span class="pl-ent">name</span>: <span class="pl-s"><span class="pl-pds">"</span>Protection<span class="pl-pds">"</span></span>
   <span class="pl-ent">level</span>: <span class="pl-c1">1</span>
 - <span class="pl-ent">name</span>: <span class="pl-s"><span class="pl-pds">"</span>Thorns<span class="pl-pds">"</span></span>
   <span class="pl-ent">level</span>: <span class="pl-c1">1</span></pre></div>
</li>
<li>(Optional) <code>commands</code>: Commands to be run by CONSOLE if item is dropped by crate.</li>
</ul>
</li>
<li>
<code>amount</code>: Amount of drops a single crate type will give.</li>
</ul>
<p><strong>Example</strong>:</p>
<div class="highlight highlight-source-yaml"><pre><span class="pl-ent">crates</span>:
  <span class="pl-c"><span class="pl-c">#</span> Crate type named "Example"</span>
  <span class="pl-ent">Example</span>:
    <span class="pl-ent">floating-text</span>: <span class="pl-s"><span class="pl-pds">"</span>Example Crate<span class="pl-pds">"</span></span>
    <span class="pl-ent">amount</span>: <span class="pl-c1">1</span>
    <span class="pl-c"><span class="pl-c">#</span> Will run the command "/say" when opened</span>
    <span class="pl-ent">commands</span>:
      - <span class="pl-s"><span class="pl-pds">"</span>say {PLAYER} has opened the example crate!<span class="pl-pds">"</span></span>
    <span class="pl-ent">drops</span>:
      <span class="pl-c"><span class="pl-c">#</span> 50% chance for 1x Diamond Sword named Sharpened Diamond Sword w/ Sharpness 5 enchantment</span>
      <span class="pl-c"><span class="pl-c">#</span> Will run the command "/tell" on drop</span>
      - <span class="pl-ent">id</span>: <span class="pl-c1">276</span>
        <span class="pl-ent">meta</span>: <span class="pl-c1">0</span>
        <span class="pl-ent">amount</span>: <span class="pl-c1">1</span>
        <span class="pl-ent">chance</span>: <span class="pl-c1">50</span>
        <span class="pl-ent">name</span>: <span class="pl-s"><span class="pl-pds">"</span>Sharpened Diamond Sword<span class="pl-pds">"</span></span>
        <span class="pl-ent">enchantments</span>:
          - <span class="pl-ent">name</span>: <span class="pl-s"><span class="pl-pds">"</span>Sharpness<span class="pl-pds">"</span></span>
            <span class="pl-ent">level</span>: <span class="pl-c1">5</span>
        <span class="pl-ent">commands</span>:
          - <span class="pl-s"><span class="pl-pds">"</span>tell {PLAYER} You got a Sharpened Diamond Sword! ;o<span class="pl-pds">"</span></span>
      <span class="pl-c"><span class="pl-c">#</span> Identical to the above drop but with a 25% chance and an Iron Sword</span>
      - <span class="pl-ent">id</span>: <span class="pl-c1">267</span>
        <span class="pl-ent">meta</span>: <span class="pl-c1">0</span>
        <span class="pl-ent">amount</span>: <span class="pl-c1">1</span>
        <span class="pl-ent">chance</span>: <span class="pl-c1">25</span>
        <span class="pl-ent">name</span>: <span class="pl-s"><span class="pl-pds">"</span>Sharpened Iron Sword<span class="pl-pds">"</span></span>
        <span class="pl-ent">enchantments</span>:
          - <span class="pl-ent">name</span>: <span class="pl-s"><span class="pl-pds">"</span>Sharpness<span class="pl-pds">"</span></span>
            <span class="pl-ent">level</span>: <span class="pl-c1">5</span>
        <span class="pl-ent">commands</span>:
          - <span class="pl-s"><span class="pl-pds">"</span>tell {PLAYER} You got a Sharpened Iron Sword! ;o<span class="pl-pds">"</span></span>
      <span class="pl-c"><span class="pl-c">#</span> 25% chance for player to get money</span>
      - <span class="pl-ent">id</span>: <span class="pl-c1">266</span>
        <span class="pl-ent">meta</span>: <span class="pl-c1">0</span>
        <span class="pl-ent">amount</span>: <span class="pl-c1">1</span>
        <span class="pl-ent">chance</span>: <span class="pl-c1">25</span>
        <span class="pl-ent">name</span>: <span class="pl-s"><span class="pl-pds">"</span>$2500<span class="pl-pds">"</span></span>
        <span class="pl-ent">type</span>: <span class="pl-s">command</span>
        <span class="pl-ent">commands</span>:
          - <span class="pl-s"><span class="pl-pds">"</span>givemoney {PLAYER} 2500<span class="pl-pds">"</span></span></pre></div>
</li>
<li>
<p>Restart your server.</p>
</li>
<li>
<p>Connect to your server.</p>
</li>
<li>
<p>Place a chest block where you intend on having a crate.</p>
</li>
<li>
<p>Run the command <code>/crate &lt;crate name&gt;</code></p>
</li>
<li>
<p>Tap the target chest.</p>
</li>
<li>
<p>Repeat with other crate types.</p>
</li>
<li>
<p>You're done!</p>
</li>
</ol>
<h2><a id="user-content-commands" class="anchor" aria-hidden="true" href="#commands"><span aria-hidden="true" class="octicon octicon-link"></span></a>Commands</h2>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
<th>Permissions</th>
<th>Aliases</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/crate &lt;crate&gt;</code></td>
<td>Changes a chest to a crate by tapping</td>
<td><code>piggycrates.command.crate</code></td>
<td>N/A</td>
</tr>
<tr>
<td><code>/key</code></td>
<td>Gives a player a specific crate key</td>
<td><code>piggycrates.command.key</code></td>
<td>N/A</td>
</tr>
<tr>
<td><code>/keyall</code></td>
<td>Gives all online players a specific crate key</td>
<td><code>piggycrates.command.keyall</code></td>
<td>N/A</td>
</tr>
</tbody>
</table>
<h2><a id="user-content-permissions" class="anchor" aria-hidden="true" href="#permissions"><span aria-hidden="true" class="octicon octicon-link"></span></a>Permissions</h2>
<table>
<thead>
<tr>
<th>Permissions</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>piggycrates</code></td>
<td>Allows usage of all PiggyCrates features</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>piggycrates.command</code></td>
<td>Allow usage of all PiggyCrates commands</td>
<td><code>op</code></td>
</tr>
<tr>
<td><code>piggycrates.command.crate</code></td>
<td>Allow usage of all /crate commands</td>
<td><code>op</code></td>
</tr>
<tr>
<td><code>piggycrates.command.key</code></td>
<td>Allow usage of the /key command</td>
<td><code>op</code></td>
</tr>
<tr>
<td><code>piggycrates.command.keyall</code></td>
<td>Allow usage of the /keyall command</td>
<td><code>op</code></td>
</tr>
</tbody>
</table>
<h2><a id="user-content-issue-reporting" class="anchor" aria-hidden="true" href="#issue-reporting"><span aria-hidden="true" class="octicon octicon-link"></span></a>Issue Reporting</h2>
<ul>
<li>If you experience an unexpected non-crash behavior with PiggyCrates, click <a href="https://github.com/DaPigGuy/PiggyCrates/issues/new?assignees=DaPigGuy&amp;labels=bug&amp;template=bug_report.md&amp;title=">here</a>.</li>
<li>If you experience a crash in PiggyCrates, click <a href="https://github.com/DaPigGuy/PiggyCrates/issues/new?assignees=DaPigGuy&amp;labels=bug&amp;template=crash.md&amp;title=">here</a>.</li>
<li>If you would like to suggest a feature to be added to PiggyCrates, click <a href="https://github.com/DaPigGuy/PiggyCrates/issues/new?assignees=DaPigGuy&amp;labels=suggestion&amp;template=suggestion.md&amp;title=">here</a>.</li>
<li>If you require support, please join our discord server <a href="https://discord.gg/qmnDsSD" rel="nofollow">here</a>.</li>
<li>Do not file any issues related to outdated API version; we will resolve such issues as soon as possible.</li>
<li>We do not support any spoons of PocketMine-MP. Anything to do with spoons (Issues or PRs) will be ignored.
<ul>
<li>This includes plugins that modify PocketMine-MP's behavior directly, such as TeaSpoon.</li>
</ul>
</li>
</ul>
<h2><a id="user-content-additional-information" class="anchor" aria-hidden="true" href="#additional-information"><span aria-hidden="true" class="octicon octicon-link"></span></a>Additional Information</h2>
<ul>
<li>We do not support any spoons. Anything to do with spoons (Issues or PRs) will be ignored.</li>
<li>We are using the following virions: <a href="https://github.com/CortexPE/Commando">Commando</a> and <a href="https://github.com/Muqsit/InvMenu">InvMenu</a>.
<ul>
<li><strong>Unless you know what you are doing, use the pre-compiled phar from <a href="https://poggit.pmmp.io/ci/DaPigGuy/PiggyCrates/~" rel="nofollow">Poggit-CI</a> and not GitHub.</strong></li>
<li>If you wish to run it via source, check out <a href="https://github.com/poggit/devirion">DEVirion</a>.</li>
</ul>
</li>
<li>Any custom enchantment plugin can be used, as long as the custom enchant has been registered to the server.</li>
<li>Detailed Installation Guide available at <a href="https://piggydocs.aericio.net/PiggyCrates.html" rel="nofollow">PiggyDocs</a>.</li>
<li>Check out our <a href="https://discord.gg/qmnDsSD" rel="nofollow">Discord Server</a> for additional plugin support.</li>
</ul>
<h2><a id="user-content-license" class="anchor" aria-hidden="true" href="#license"><span aria-hidden="true" class="octicon octicon-link"></span></a>License</h2>
<pre><code>   Copyright 2018-2020 DaPigGuy

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.

</code></pre>
<script defer src="https://static.cloudflareinsights.com/beacon.min.js/v52afc6f149f6479b8c77fa569edb01181681764108816" integrity="sha512-jGCTpDpBAYDGNYR5ztKt4BQPGef1P0giN6ZGVUi835kFF88FOmmn8jBQWNgrNd8g/Yu421NdgWhwQoaOPFflDw==" data-cf-beacon='{"rayId":"7e14642aaf28d039","version":"2023.4.0","r":1,"b":1,"token":"508eb1d242ef46b690a0886422106e77","si":100}' crossorigin="anonymous"></script>
